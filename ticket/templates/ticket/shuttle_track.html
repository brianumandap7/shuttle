{% extends 'ticket/base2.html' %}
{% block content %}
{% load crispy_forms_tags %}
{% load static %}
<meta http-equiv="refresh" content="10">
<div class="row">
	<div class = "col-lg-6 col-md-6 col-xs-6">
		<center>
		{% for items in stat %}
		{% if items.current_loc_id == 1 %}
		<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3867.2770764246884!2d120.95874881478497!3d14.237052390034895!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33bd7ef46fab8bbf%3A0x7afedd6cee471d1!2sFEU%20Cavite%20College%20Building!5e0!3m2!1sen!2sph!4v1638152465776!5m2!1sen!2sph" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

		{% elif items.current_loc_id == 2 %}
		<iframe src="https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d7734.417341467392!2d120.95843262425008!3d14.24104616012895!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x33bd7ef46fab8bbf%3A0x7afedd6cee471d1!2sFEU%20Cavite%20College%20Building%2C%20Silang%2C%20Cavite!3m2!1d14.2370524!2d120.9609375!4m5!1s0x33bd7e5fdd8782b1%3A0x5207533f3d7ad5cd!2sFEU%20Cavite%20High%20School%20Building%20MetroGate%20Estates%20Silang%204118%20Cavite!3m2!1d14.242223699999998!2d120.9640951!5e0!3m2!1sen!2sph!4v1638753626855!5m2!1sen!2sph" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

		{% elif items.current_loc_id == 3 %}
		<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d5965.986666547188!2d120.96009061480592!3d14.239800095911678!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33bd7e5fdd8782b1%3A0x5207533f3d7ad5cd!2sFEU%20Cavite%20High%20School%20Building!5e0!3m2!1sen!2sph!4v1638751777018!5m2!1sen!2sph" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

		{% elif items.current_loc_id == 4 %}
		<iframe src="https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d3867.202610250418!2d120.96700311478489!3d14.241399940032048!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x33bd7e5fdd8782b1%3A0x5207533f3d7ad5cd!2sFEU%20Cavite%20High%20School%20Building%2C%20MetroGate%20Estates%2C%20Silang%2C%20Cavite!3m2!1d14.242223699999998!2d120.9640951!4m5!1s0x33bd7f5edc249275%3A0x44cf3a840e5767be!2sMetroGate%20Silang%20Estates%20by%20Moldex%20Realty%2C%20Silang%2C%20Cavite!3m2!1d14.240488399999998!2d120.97402579999999!5e0!3m2!1sen!2sph!4v1638753762172!5m2!1sen!2sph" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

		{% elif items.current_loc_id == 5 %}
		<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3867.219606047609!2d120.974249426871!3d14.24040779086073!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33bd7f5edc249275%3A0x44cf3a840e5767be!2sMetroGate%20Silang%20Estates%20by%20Moldex%20Realty!5e0!3m2!1sen!2sph!4v1638752015094!5m2!1sen!2sph" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
		{% endif %}


		{% endfor %}
		</center>
	</div>

	<div class="col-lg-6 col-md-6 col-xs-6">
		<form method="POST">
		{% csrf_token %}
		<table>
			<tr>
				<td>
					Shuttle number: {% for items in stat %}{{items.shuttle}}{% endfor %}
				</td>
			</tr>

			<tr>
				<td>
					Driver: {% for items in stat %}{{items.a_driver}}{% endfor %}
				</td>
			</tr>

			<tr>
				<td>
					
					<label>Select Movement - Location: </label>
                        <select class="form-control" name = "cl" disabled>
                          <option style="display:none"></option>
                         {% for items in curr %}

                          <option value="{{items.id}}" {% for item in stat %}{% if item.current_loc_id == items.id %}selected{% endif %}{% endfor %}>{{items.current_loc}}</option>
                         {% endfor %}
                    </select>
				</td>
			</tr>
			<tr>
				<td>
					<h6>Actual Movement - Location: {% for items in stat %}{{items.current_loc}}{% endfor %}</h6>
				</td>
			</tr>
			
			<tr>
				<td>
					<b>Shuttle's Current Map Location:</b>
					{% for items in stat %}

					<p id="demo123">
						Latitude: <input type = 'text' name = 'lat' value='{{items.lat}}' readonly>
						Longitude: <input type = 'text' name = 'lon' value='{{items.lon}}' readonly>
					</p>
		          
          			{% endfor %}
          
				</td>
			</tr>

			<tr>
				<td>
					Let the driver you're here by turning on your location.
				</td>
			</tr>
			<tr>
				<td>
					<button onclick="getLocation()" type = "submit" class="btn btn-success">Turn my Location ON!</button>

					<p id="demo"></p>

					<script>
					var x = document.getElementById("demo");

					function getLocation() {
					  if (navigator.geolocation) {
					    navigator.geolocation.getCurrentPosition(showPosition);
					  } else { 
					    x.innerHTML = "Geolocation is not supported by this browser.";
					  }
					}

					function showPosition(position) {
					  x.innerHTML = "Your Latitude: " + position.coords.latitude + 
					  "<br>Your Longitude: " + position.coords.longitude;
					}
					</script>
				</td>
			</tr>
		</table>
		</form>


	</div>
</div>

{% endblock content %}

